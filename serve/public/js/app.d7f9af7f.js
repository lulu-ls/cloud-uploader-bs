(function(){"use strict";var e={1273:function(e,t,l){var a=l(9242),o=l(1),n=l(1020),u=(l(4415),l(2748));const i=l(7218),r=e=>new Promise(((t,l)=>{e?e.url?i({method:e.method||"post",url:e.url,data:e.data,header:e.header||{"contend-type":"application/json; charset=utf-8"}}).then((e=>{if(e&&e.data){if(0===e.data.code)return void t(e.data.data);l(`[${e.data.code}] ${e.data.msg}`)}l("未返回任何信息")})).catch((e=>{e&&e.response&&e.response.data?l(e.response.data):l(e)})):l("url 能为空"):l("配置不能为空")}));var s=l(3396);function c(e,t,l,a,o,n){const u=(0,s.up)("Login"),i=(0,s.up)("el-aside"),r=(0,s.up)("Upload"),c=(0,s.up)("el-main"),p=(0,s.up)("el-container");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{width:"40%"},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1}),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r)])),_:1})])),_:1})])}var p=l(4870);const d=(0,n.Q_)("loginStatus",(()=>{let e=(0,p.iH)(0);function t(t){e.value=t}return{status:e,setStatus:t}}));var f=l(7178);const m=(0,s._)("h3",null,"扫码登录",-1),v={style:{height:"300px",display:"flex","align-items":"center","justify-content":"center"}},g={style:{width:"250px",height:"250px",position:"relative"}},h=["src"],y={key:0,style:{width:"100%",height:"100%","background-color":"rgba(255,255,255,.8)",position:"absolute",top:"0","line-height":"250px",color:"#409eff"}},_=(0,s._)("div",null,[(0,s.Uk)(" 请使用"),(0,s._)("span",{style:{color:"#1875bf"}},"网易云音乐APP"),(0,s.Uk)("扫码")],-1),w=(0,s._)("div",{style:{"margin-top":"50px","font-size":"12px",color:"#676767"}}," 暂不支持其他方式登录",-1);var b={__name:"Login",setup(e){const t=(0,p.iH)(!1),l=(0,p.iH)(""),a=(0,p.iH)(""),o=(0,p.iH)(""),n=d(),u=(0,s.Fl)((()=>n.status)),i=(0,s.Fl)((()=>-1===u.value)),c=(0,s.Fl)((()=>1===u.value)),b=(0,s.Fl)((()=>i.value||c.value));(0,s.bv)((()=>{k()}));const k=()=>{t.value=!0,r({url:"/api/login/check",data:{}}).then((e=>{n.setStatus(e),1!==e&&x()})).catch((e=>{console.log(e)})).finally((()=>{t.value=!1}))},x=()=>{n.setStatus(0),t.value=!0,r({url:"/api/login/qrcode",data:{}}).then((e=>{l.value=e.key,a.value=e.qrurl,o.value=e.qrimg,n.setStatus(0),setTimeout((()=>{U()}),5e3)})).catch((e=>{console.log(e)})).finally((()=>{t.value=!1}))},U=()=>{r({url:"/api/login/code-state",data:{key:l.value}}).then((e=>{console.log(e),n.setStatus(e),1!==e?-1!==e&&1!==e&&setTimeout((()=>{U(l.value)}),5e3):W({message:"登录成功，请在右侧选择文件上传！",type:"success"})})).catch((e=>{console.log(e)})).finally((()=>{}))},W=({message:e,type:t})=>{(0,f.z8)({message:e,type:t||"success"})};return(e,l)=>{const a=(0,s.up)("el-button"),n=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[m,(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",g,[(0,s._)("img",{src:o.value,style:{width:"100%",height:"100%"},alt:""},null,8,h),(0,p.SU)(b)?((0,s.wg)(),(0,s.iD)("div",y,[(0,p.SU)(i)?((0,s.wg)(),(0,s.j4)(a,{key:0,type:"primary",text:"",bg:"",onClick:x},{default:(0,s.w5)((()=>[(0,s.Uk)("点击刷新 ")])),_:1})):(0,s.kq)("",!0),(0,p.SU)(c)?((0,s.wg)(),(0,s.j4)(a,{key:1,type:"primary",text:"",bg:"",onClick:x},{default:(0,s.w5)((()=>[(0,s.Uk)("退出登录 ")])),_:1})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])),[[n,t.value]]),_,w])}}};const k=b;var x=k,U=(l(7658),l(7139)),W=l(4775),S=l(6666);const O={style:{"margin-bottom":"30px"}},j=(0,s._)("div",{class:"el-upload__text"},[(0,s.Uk)(" 拖动文件至此或 "),(0,s._)("em",null,"点击选择")],-1),H=(0,s._)("div",{class:"el-upload__tip"}," 仅允许上传音频格式文件( audio/* )，最大 50MB ",-1),C={style:{"margin-top":"30px"}},F={class:"dialog-footer"};var P={__name:"Upload",setup(e){const t=d(),l=(0,p.iH)([]),a=(0,s.Fl)((()=>t.status)),o=(0,p.iH)(),n=((0,p.iH)(!1),(0,p.iH)(!1)),i=(0,p.iH)(!1),c=(0,p.iH)(""),m=()=>{console.log(c.value),c.value&&r({url:"/api/feedback",data:{comment:c.value}}).then((e=>{b({message:e,type:"success"}),i.value=!1})).catch((e=>{k({message:e,type:"error"})})).finally((()=>{}))},v=()=>{if(1!==a.value)return console.log("请登录"),n.value=!0,void setTimeout((()=>{n.value=!1}),400);console.log(l.value),l.value.length<=0?k({message:"请选择文件",type:"error"}):o.value.submit()},g=(e,t)=>{l.value.push(e)},h=(e,t)=>{l.value=l.value.filter((t=>t.uid!==e.uid)),console.log(l.value)},y=e=>{const t=new FormData;t.append("file",e.file);const a=W.kN.service({fullscreen:!0,lock:!0,text:"鉴于服务器性能，上传时间可能略长，请勿刷新页面，耐心等待...",background:"rgba(0, 0, 0, 0.7)"});r({url:"/api/upload/one",data:t,header:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e),b({message:e,type:"success"}),o.value.clearFiles(),l.value=[]})).catch((e=>{console.log(e),k({message:e,type:"error"})})).finally((()=>{a.close()}))},_=()=>{console.log("new"),window.open("https://github.com/lulu-ls/cloud-uploader")},w=()=>{k({message:"目前仅支持单个文件上传",type:"error"})},b=({title:e,message:t,type:l})=>{(0,S.bM)({title:e||"提示",message:t,type:l||"info"})},k=({message:e,type:t})=>{(0,f.z8)({message:e,type:t||"success"})};return(e,l)=>{const a=(0,s.up)("el-link"),r=(0,s.up)("upload-filled"),d=(0,s.up)("el-icon"),f=(0,s.up)("el-upload"),b=(0,s.up)("Upload",!0),k=(0,s.up)("el-button"),x=(0,s.up)("el-popover"),W=(0,s.up)("el-input"),S=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",O,[(0,s.Wm)(a,{icon:(0,p.SU)(u.Star),type:"danger",onClick:_},{default:(0,s.w5)((()=>[(0,s.Uk)(" 去 Github 点亮小星星，支持一下 ^_^")])),_:1},8,["icon"])]),(0,s.Wm)(f,{class:"upload-demo",ref_key:"uploadRef",ref:o,drag:"","auto-upload":!1,limit:1,"on-change":g,"on-exceed":w,"on-remove":h,"http-request":y,accept:"audio/*"},{tip:(0,s.w5)((()=>[H])),default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"el-icon--upload"},{default:(0,s.w5)((()=>[(0,s.Wm)(r)])),_:1}),j])),_:1},512),(0,s._)("div",C,[(0,s.Wm)(x,{disabled:1===(0,p.SU)(t).status,trigger:"hover",content:"",title:"请先扫码完成登录",placement:"bottom",width:160},{reference:(0,s.w5)((()=>[(0,s.Wm)(k,{type:"primary",onClick:v,class:(0,U.C_)(n.value?"animate__animated animate__shakeX":"")},{default:(0,s.w5)((()=>[(0,s.Uk)(" 点击提交 "),(0,s.Wm)(d,{class:"el-icon--right"},{default:(0,s.w5)((()=>[(0,s.Wm)(b)])),_:1})])),_:1},8,["class"])])),_:1},8,["disabled"]),(0,s.Wm)(k,{text:"",type:"info",onClick:l[0]||(l[0]=e=>i.value=!0)},{default:(0,s.w5)((()=>[(0,s.Uk)(" 反馈 "),(0,s.Wm)(d,{class:"el-icon--right"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,p.SU)(u.Edit))])),_:1})])),_:1})]),(0,s.Wm)(S,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),title:"反馈",width:"30%",center:""},{footer:(0,s.w5)((()=>[(0,s._)("span",F,[(0,s.Wm)(k,{type:"primary",onClick:m},{default:(0,s.w5)((()=>[(0,s.Uk)(" 提交反馈 ")])),_:1})])])),default:(0,s.w5)((()=>[(0,s.Wm)(W,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e),rows:5,type:"textarea",placeholder:"请输入反馈内容",maxlength:200,minlength:5,"show-word-limit":""},null,8,["modelValue"])])),_:1},8,["modelValue"])])}}};const T=P;var q=T,D={name:"App",components:{Login:x,Upload:q}},V=l(89);const M=(0,V.Z)(D,[["render",c]]);var z=M;const L=(0,a.ri)(z),$=(0,n.WB)();L.config.globalProperties.$http=r,L.use($),L.use(o.Z);for(let A in u)L.component(A,u[A]);L.mount("#app")}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,l),n.exports}l.m=e,function(){var e=[];l.O=function(t,a,o,n){if(!a){var u=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],n=e[c][2];for(var i=!0,r=0;r<a.length;r++)(!1&n||u>=n)&&Object.keys(l.O).every((function(e){return l.O[e](a[r])}))?a.splice(r--,1):(i=!1,n<u&&(u=n));if(i){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,o,n]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,u=a[0],i=a[1],r=a[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(o in i)l.o(i,o)&&(l.m[o]=i[o]);if(r)var c=r(l)}for(t&&t(a);s<u.length;s++)n=u[s],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(c)},a=self["webpackChunkcloud_bs_app"]=self["webpackChunkcloud_bs_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[998],(function(){return l(1273)}));a=l.O(a)})();
//# sourceMappingURL=app.d7f9af7f.js.map